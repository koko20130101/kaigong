/** layuiAdmin.std-v1.2.1 LPPL License By http://www.layui.com/admin/ */
 ;layui.config({}).extend({}).define(["laytpl","laypage","layer","form"],function(e){"use strict";var t=layui.$,i=layui.laytpl,a=layui.laypage,n=layui.layer,r=layui.form,o=layui.hint(),l=layui.device(),c={config:{indexName:"lay_table_index",cols:{isCheckName:"lay_is_checked",isRadio:"lay_is_radio",isOpen:"lay_is_open",isShow:"lay_is_show",level:"lay_level",children:"children",cheDisabled:"lay_che_disabled",radDisabled:"lay_rad_disabled",iconOpen:"lay_icon_open",iconClose:"lay_icon_close",icon:"lay_icon"},initWidth:{checkbox:48,space:15,numbers:40,radio:48}},cache:{tableId:{data:{list:[],map:{},treeList:[],upIds:[]}},cla:{claIds:{tableId:!0},claObjs:{tableId:{}}},selectcode:{demokey:[{key:{value:""}}]}},index:layui.table?layui.table.index+1e4:0,set:function(e){var i=this;return i.config=t.extend({},i.config,e),i},on:function(e,t){return layui.onevent.call(this,s,e,t)},getClass:function(e){return c.cache.cla.claObjs[e]},pushClass:function(e,t){c.cache.cla.claObjs[e]=t},isCalss:function(e){var t=this.cache.cla.claIds||{};return t.hasOwnProperty(e)||!1},isClassYes:function(e){var t=this.cache.cla.claIds||{};return t[e]||!1},pushClassIds:function(e,t){this.cache.cla.claIds[e]=t},setObj:function(e,t,i){this.obj[e]||(this.obj[e]={}),this.obj[e][t]=i},getObj:function(e,t){return this.obj[e]?this.obj[e][t]:null},getDataList:function(e){return c.cache[e]?c.cache[e].data.list:[]},setDataList:function(e,t){c.cache[e]||(c.cache[e]={}),c.cache[e].data||(c.cache[e].data={}),c.cache[e].data.list||(c.cache[e].data.list=[]),c.cache[e].data.list=t},getDataMap:function(e){return c.cache[e]?c.cache[e].data.map:{}},setDataMap:function(e,t){c.cache[e]||(c.cache[e]={}),c.cache[e].data||(c.cache[e].data={}),c.cache[e].data.map||(c.cache[e].data.map={}),c.cache[e].data.map=t},getDataTreeList:function(e){return c.cache[e]?c.cache[e].data.treeList:[]},setDataTreeList:function(e,t){c.cache[e]||(c.cache[e]={}),c.cache[e].data||(c.cache[e].data={}),c.cache[e].data.treeList||(c.cache[e].data.treeList={}),c.cache[e].data.treeList=t},getDataRootList:function(e){return c.cache[e]?c.cache[e].data.upIds||[]:[]},setDataRootList:function(e,t){c.cache[e]||(c.cache[e]={}),c.cache[e].data||(c.cache[e].data={}),c.cache[e].data.upIds||(c.cache[e].data.upIds=[]),c.cache[e].data.upIds=t},init:function(e,i){i=i||{};var a=this,n=t(e?'table[lay-filter="'+e+'"]':f+"[lay-data]"),r="Table element property lay-data configuration item has a syntax error: ";return n.each(function(){var a=t(this),n=a.attr("lay-data");try{n=new Function("return "+n)()}catch(l){o.error(r+n)}var d=[],s=t.extend({elem:this,cols:[],data:[],skin:a.attr("lay-skin"),size:a.attr("lay-size"),even:"string"==typeof a.attr("lay-even")},c.config,i,n);e&&a.hide(),a.find("thead>tr").each(function(e){s.cols[e]=[],t(this).children().each(function(i){var a=t(this),n=a.attr("lay-data");try{n=new Function("return "+n)()}catch(l){return o.error(r+n)}var c=t.extend({title:a.text(),colspan:a.attr("colspan")||0,rowspan:a.attr("rowspan")||0},n);c.colspan<2&&d.push(c),s.cols[e].push(c)})}),a.find("tbody>tr").each(function(e){var i=t(this),a={};i.children("td").each(function(e,i){var n=t(this),r=n.data("field");if(r)return a[r]=n.html()}),layui.each(d,function(e,t){var n=i.children("td").eq(e);a[t.field]=n.html()}),s.data[e]=a}),c.render(s)}),a},render:function(e){c.pushClassIds(e.id);var t=new j(e);return d.call(t)},ready:function(e,t){function i(){if(e){var r=c.getClass(e);if(r&&r.hasOwnProperty("layBody"))t(r),a=!0;else{var o=new Date,l=o.getTime()-n.getTime();l<=1e4&&!a&&setTimeout(i,50)}}}var a=!1,n=new Date;e&&t&&setTimeout(i,50)},checkStatus:function(e){var t=0,i=0,a=[],n=c.getDataList(e)||[];return layui.each(n,function(e,n){return n.constructor===Array?void i++:void(n[c.config.cols.isCheckName]&&(t++,a.push(c.clearCacheKey(n))))}),{data:a,isAll:!!n.length&&t===n.length-i}},setCheckStatus:function(e,t,i){var a=null,n=c.getClass(e),r=c.getDataList(e)||[];n.layBody.find('input[name="'+L+'"]');if(t&&i){var o=i.split(",");o.forEach(function(e){var i=null;if(r.forEach(function(a){var n=a[t]+"",r=e+"";if(n==r)return void(i=a)}),i){var a=i[c.config.indexName];n.layBody.find('input[name="'+L+'"][value="'+a+'"]').prop("checked",!0),n.setCheckData(a,!0)}}),n.syncCheckAll(),n.renderForm("checkbox")}return a},radioStatus:function(e){var t=c.getClass(e),i=null,a=c.getDataList(e)||[],n=t.layBody.find("input[name='"+F+"']:checked").val();return n=parseInt(n),a.forEach(function(e){e[c.config.indexName]==n&&(i=e)}),c.clearCacheKey(i)},setRadioStatus:function(e,t,i){var a=c.getClass(e),n=null,o=c.getDataList(e)||[];if(t&&i&&(o.forEach(function(e){var a=e[t]+"",r=i+"";if(a==r)return void(n=e)}),n)){var l=n[c.config.indexName];a.layBody.find("input:radio[name='"+F+"'][value='"+l+"']").prop("checked",!0),r.render("radio")}return n},clearCacheKey:function(e){return e=t.extend({},e),delete e[c.config.cols.isCheckName],delete e[c.config.indexName],e},query:function(e,i){var a=c.getClass(e);a.renderTdCss(),a.config.data&&a.config.data.constructor===Array&&delete a.config.data,a.config=t.extend({},a.config,i),a.pullData(a.page,a.loading())},reload:function(e,i){var a=d.config[e];return i=i||{},a?(i.data&&i.data.constructor===Array&&delete a.data,c.render(t.extend(!0,{},a,i))):o.error("The ID option was not found in the table instance")},addRow:function(e,i,a){var n=c.getClass(e),r=n.config,o=[],l=c.getDataTreeList(e),d=c.getDataList(e)||[];if(n.resetData(a),d.splice(i,0,a),c.kit.restNumbers(d),c.setDataMap(e,n.resetDataMap(d)),r.isTree){var o=n.treeFindUpData(a);if(o){o.children;o.children.push(a),a[c.config.cols.level]=o[c.config.cols.level]+1}else a[c.config.cols.level]=1,l.push(a)}var s=n.renderTr(a,a[c.config.indexName]),f='<tr data-index="'+a[c.config.indexName]+'"'+n.renderTrUpids(a)+">"+s.join("")+"</tr>";if(0==i){var u=n.layBody.find("table tbody");t(u).prepend(f),n.layBody.find(".layui-none").remove()}else{var h=n.layBody.find("[data-index="+(i-1)+"]");t(h).after(f)}n.renderForm(),r.isPage&&n.renderPage(n.config.page.count+1),n.restNumbers(),n.events(),r.isTree&&(n.treeNodeOpen(o,!0),n.renderTreeConvertShowName(o))},delRow:function(e,t){var i=c.getClass(e),a=i.config,n=c.getDataList(e),r=[],o={},l=[],d=[];if(i&&t){c.kit.isArray(t)?l=t:l[0]=t,l.forEach(function(e){var t=i.treeFindUpData(e);t&&d.push(t)}),r=a.isTree?c.treeFindSonList(i.config.id,l):l,r.forEach(function(e){var t=e[c.config.indexName];o[t]=t;var a=i.layBody.find('tr[data-index="'+t+'"]');a.remove()}),i.restNumbers();for(var s=[],f=0,u=n.length;f<u;f++){var h=!0;r.forEach(function(e){e[c.config.indexName]===n[f][c.config.indexName]&&(h=!1)}),h&&s.push(n[f])}c.kit.restNumbers(s),c.setDataList(e,s),c.setDataMap(e,i.resetDataMap(s)),c.setDataTreeList(e,i.resetDataTreeList(s,c.getDataRootList(e))),d.forEach(function(e){i.renderTreeConvertShowName(e)}),a.isPage&&i.renderPage(i.config.page.count-Object.keys(o).length),i.events()}},updateRow:function(e,i){var a=c.getClass(e);if(a&&i){var n=i[a.config.idField],r=c.getDataMap(e),o=r[n];if(o){t.extend(o,i);var l=o[c.config.indexName],d=a.renderTr(o,l),s=a.layBody.find("tr[data-index="+l+"]");t(s).html(d)}}},treeNodeOpen:function(e,t,i){var a=c.getClass(e);a&&t&&a.treeNodeOpen(t,i)},treeOpenAll:function(e,t){var i=c.getClass(e);if(i){void 0===t&&(t=!0);var a=c.getDataList(e);a&&a.forEach(function(e){i.treeNodeOpen(e,t)})}},treeFindSonList:function(e,t){var i=c.getClass(e);if(!i||!t)return[];var a=[],n=[],r={};return c.kit.isArray(t)?a=t:a[0]=t,a.forEach(function(e){if(e.children.length>0){var t=i.treeFindSonData(e);t.forEach(function(e){r[e[c.config.indexName]]||(n.push(e),r[e[c.config.indexName]]=e[c.config.indexName])})}n.push(e),r[e[c.config.indexName]]=e[c.config.indexName]}),n},treeFindUpDatas:function(e,t){var i=c.getClass(e);return i&&t?i.treeFindUpDatas(t):[]},treeFindUpData:function(e,t){var i=c.getClass(e);return i&&t?i.treeFindUpData(t):[]},treeFindSonIds:function(e,t){var i=[],a=c.treeFindSonList(e,t);return a.forEach(function(e){i.push([c.config.indexName])}),i},treeFindSonIdFields:function(e,t){var i=[],a=c.getClass(e),n=c.treeFindSonList(e,t);return n.forEach(function(e){i.push(e[a.config.idField])}),i},treeIconRender:function(e,t){var i=c.getClass(e);return i&&t?i.treeIconRender(t,!1):[]},kit:{isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isNumber:function(e){var t=/^\d+(\.\d+)?$/,i=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;return!(!t.test(e)&&!i.test(e))},restNumbers:function(e){if(e){var t=0;e.forEach(function(e){e[c.config.indexName]=t,t++})}}}},d=function(){var e=this,t=e.config,i=t.id;return i&&(d.config[i]=t),{reload:function(t){e.reload.call(e,t)},config:t}},s="treeGrid",f=".layui-table",u="layui-hide",h="layui-none",p="layui-table-view",y=".layui-table-header",g=".layui-table-body",v=".layui-table-main",m=".layui-table-fixed",b=".layui-table-fixed-l",x=".layui-table-fixed-r",D=".layui-table-tool",k=".layui-table-page",C=".layui-table-sort",N="layui-table-edit",w="layui-table-hover",F="table_radio_",L="layTableCheckbox",T=".layui-table-filter",S="treeId",R="treeUpId",I="treeShowName",O=function(e){var t='{{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}}';return e=e||{},['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',function(){return e.fixed&&"right"!==e.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===e.fixed?'{{# if(item2.fixed === "right"){ }}':""}(),'<th data-field="{{ item2.field||i2 }}" {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} '+t+' {{# if(item2.unresize){ }}data-unresize="true"{{# } }}>','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colspan > 1){ }}","group","{{# } else { }}","{{d.index}}-{{item2.field || i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose">',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(!(item2.colspan > 1) && item2.sort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc"></i><i class="layui-edge layui-table-sort-desc"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",e.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},_=function(e){},W=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),M=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool"></div>',"{{# } }}",'<div class="layui-table-box">',"{{# var left, right; }}",'<div class="layui-table-header">',O(),"</div>",'<div class="layui-table-filter">',_(),"</div>",'<div class="layui-table-body layui-table-main">',W,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',O({fixed:!0}),"</div>",'<div class="layui-table-body">',W,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',O({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',W,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.isPage){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","</div>"].join(""),z=t(window),E=t(document),j=function(e){var i=this;i.index=++c.index,i.config=t.extend({},i.config,c.config,e),i.configFirst=t.extend({},i.config,c.config,e),i.render(),c.pushClass(e.id,i)};j.prototype.config={limit:10,loading:!0,cellMinWidth:60,heightRemove:[],text:{none:"无数据"},isFilter:!1,method:"post",radDisabledNum:0,cheDisabledNum:0,branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;",iconOpen:!0,isOpenDefault:!0,parseData:null,onClickRow:null,onDblClickRow:null,onBeforeCheck:null,onCheck:null,onRadio:null,isTree:!0,isPage:!1,height:"100%"},j.prototype.configFirst={},j.prototype.render=function(){var e=this,a=e.config;if(a.elem=t(a.elem),a.where=a.where||{},a.id=a.id||a.elem.attr("id"),e.test(),a.request=t.extend({pageName:"page",limitName:"limit"},a.request),a.response=t.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},a.response),"object"==typeof a.page&&(a.limit=a.page.limit||a.limit,a.limits=a.page.limits||a.limits,e.page=a.page.curr=a.page.curr||1,delete a.page.elem,delete a.page.jump),!a.elem[0])return e;e.columnWidthInit();var n=a.elem,r=n.next("."+p),o=e.elem=t(i(M).render({VIEW_CLASS:p,data:a,index:e.index}));if(a.index=e.index,r[0]&&r.remove(),n.after(o),e.renderTdCss(),e.layHeader=o.find(y),e.layMain=o.find(v),e.layBody=o.find(g),e.layFixed=o.find(m),e.layFixLeft=o.find(b),e.layFixRight=o.find(x),e.layTool=o.find(D),e.layPage=o.find(k),e.layFilter=o.find(T),e.layTool.html(i(t(a.toolbar).html()||"").render(a)),a.height&&(e.tableHeight(),e.resizeHeight(),e.renderCss()),a.cols.length>1){var l=e.layFixed.find(y).find("th");l.height(e.layHeader.height()-1-parseFloat(l.css("padding-top"))-parseFloat(l.css("padding-bottom")))}a.isFilter&&e.layFilter.html(e.renderFilter()),e.pullData(e.page,e.loading()),e.test()},j.prototype.initOpts=function(e){var t=this,i=t.config;e.checkbox&&(e.type="checkbox"),e.space&&(e.type="space"),e.type||(e.type="normal"),"normal"!==e.type&&(e.unresize=!0,e.width=e.width||c.config.initWidth[e.type]),i.isFilter&&0!=e.isFilter&&(e.isFilter=!0)},j.prototype.getParentDivHeight=function(e){var i=t("#"+e).parent().height();return i},j.prototype.getCols=function(e){var t=this,i={},a=t.config.cols[0],n=!1,r=/^[0-9]+.?[0-9]*$/;r.test(e)&&(n=!0);for(var o in a)if(n){if(o==parseInt(e))return a[o]}else if(e==a[o].field)return a[o];return i},j.prototype.reload=function(e){var i=this;i.config.data&&i.config.data.constructor===Array&&delete i.config.data,i.config=t.extend({},i.config,e),i.configFirst=t.extend({},i.config,e),i.render()},j.prototype.page=1,j.prototype.restNumbers=function(){var e=this,i=(e.config,e.layBody.find("table tbody tr")),a=0;i.each(function(e){t(this).attr("data-index",a),t(this).find(".laytable-cell-numbers p").text(a+1),t(this).data("index",a),a++})},j.prototype.resetData=function(e){var t=this,i=t.config;i.isTree&&(e.hasOwnProperty(c.config.cols.isOpen)||(e[c.config.cols.isOpen]=i.isOpenDefault),e.hasOwnProperty(c.config.cols.isShow)||(e[c.config.cols.isShow]=!!i.isOpenDefault)),e.hasOwnProperty(c.config.cols.cheDisabled)||(e[c.config.cols.cheDisabled]=!1),e[c.config.cols.cheDisabled]&&i.cheDisabledNum++,e[c.config.cols.radDisabled]&&i.radDisabledNum++,e.children=[]},j.prototype.resetDataMap=function(e){var t=this,i=t.config,a=i.idField,n={};return e&&e.forEach(function(e){n[e[a]]=e}),n},j.prototype.resetDataresetRoot=!0,j.prototype.resetDataRoot=function(e){var t=this,i=t.config,a=(i[S],i[R]),n=c.getDataMap(t.config.id),r=c.cache[i.id].data.upIds||[],o={};c.cache[i.id].data.upIds=[],r=c.cache[i.id].data.upIds;for(var l=0;l<e.length;l++){var d=e[l];if(!n[d[a]]){if(!o[d[a]]){var s=!0;r.forEach(function(e){e===d[a]&&(s=!1)}),s&&r.push(d[a])}o[d[a]]=d[a]}}return r},j.prototype.resetDataTreeList=function(e,t){var i=this,a=i.config,n=a[S],r=a[R],o=[],l=function(t){for(var i=[],a=0;a<e.length;a++){var o=e[a];o[r]===t&&(o.children=l(o[n]),i.push(o))}return i};return t.forEach(function(e){var t=l(e);t&&t.forEach(function(e){o.push(e)})}),o},j.prototype.resetDataTableList=function(e){var t=this,i=t.config,a=(i[S],i[R],[]),n=function(e,t){for(var i=0;i<e.length;i++){var r=e[i];r[c.config.cols.level]=t,a.push(r),r.children&&r.children.length>0&&n(r.children,1+t)}};return n(e,1),a.forEach(function(e){var i=t.treeFindUpData(e);!i||i[c.config.cols.isOpen]&&i[c.config.cols.isShow]?e[c.config.cols.isShow]=!0:e[c.config.cols.isShow]=!1}),a},j.prototype.resetDatas=function(e){var t=this,i=t.config,a=(i[S],i[R],[]),n=[],r=e,o=t.resetDataMap(e);if(a.push(r),a.push(n),a.push(o),c.setDataList(t.config.id,r),c.setDataTreeList(t.config.id,n),c.setDataMap(t.config.id,o),null==e||e.length<=0)return a;for(var l=0;l<e.length;l++)t.resetData(e[l]);if(i.isTree){r=[],c.setDataList(t.config.id,r);var d=c.cache[i.id].data.upIds||[];(d.length<=0||t.resetDataresetRoot)&&(c.cache[i.id].data.upIds=[],d=t.resetDataRoot(e),t.resetDataresetRoot=!1),n=t.resetDataTreeList(e,d),c.setDataTreeList(t.config.id,n),r=t.resetDataTableList(n),c.setDataList(t.config.id,r)}return a},j.prototype.treeFindDataById=function(e){var t=this,i=t.config,a=null,n=c.getDataList(t.key),r=i[S];return n.forEach(function(t){if(t[r]==e)return void(a=t)}),a},j.prototype.treeFindUpData=function(e){var t=null,i=this,a=i.config,n=a[R],r=c.getDataMap(i.config.id);return t=r[e[n]]},j.prototype.treeFindUpDatas=function(e){var t=this,i=(t.config,[]),a=function(e){var n=t.treeFindUpData(e);n&&(i.push(n),a(n))};return a(e),i},j.prototype.treeFindSonData=function(e){function t(e){e.children.length>0&&e.children.forEach(function(e){i.push(e),e.children.length>0&&t(e)})}var i=[];return t(e),i},j.prototype.treeConvertShowName=function(e){var t=this,i=(t.config,e.children&&e.children.length>0),a='<div style="float: left;height: 28px;line-height: 28px;padding-left: '+function(){return i?"5px":"21px"}()+'">'+function(){for(var t="<i>",i=1;i<e[c.config.cols.level];i++)t+="&nbsp;&nbsp;&nbsp;&nbsp;";return t+="</i>"}()+function(){var a="",n=e[c.config.cols.isOpen]?"&#xe625;":"&#xe623;";return i?a='<i class="layui-icon layui-tree-head">'+n+"</i>"+t.treeIconRender(e,!0):a+=t.treeIconRender(e,!0),a}()+"</div>";return a},j.prototype.treeNodeOpen=function(e,t){var i=this,a=i.layBody.find('tr[data-index="'+e[c.config.indexName]+'"]');if(e){e[c.config.cols.isOpen]=t;var n=function(t){if(t.children&&t.children.length>0)for(var a=t.children,r=0;r<a.length;r++){var o=a[r];if(e[c.config.cols.isOpen]){if(t[c.config.cols.isOpen]&&t[c.config.cols.isShow]){var l=i.layBody.find('tr[data-index="'+o[c.config.indexName]+'"]');l.css("display",""),o[c.config.cols.isShow]=!0}}else{var l=i.layBody.find('tr[data-index="'+o[c.config.indexName]+'"]');l.css("display","none"),o[c.config.cols.isShow]=!1}n(o)}};n(e),i.treeIconRender(e,!1);var r=a.find(".layui-tree-head");e[c.config.cols.isOpen]?r.html("&#xe625;"):r.html("&#xe623;")}},j.prototype.treeIconRender=function(e,i){var a=this,n=a.config,r=n.iconOpen,o=e.children&&e.children.length>0,l="";if(!r)return l;var d=function(){var t='<i class="layui-tree-'+e[n.idField]+'" style="display:inline-block;width: 16px;height: 16px;background:url(';return t+=o?e[c.config.cols.isOpen]?e[c.config.cols.iconOpen]:e[c.config.cols.iconClose]:e[c.config.cols.icon],t+=') 0 0 no-repeat;"></i>'};if(o?l=e[c.config.cols.iconOpen]||e[c.config.cols.iconClose]?d():'<i class="layui-icon layui-tree-'+e[n.idField]+" layui-tree-"+(e[c.config.cols.isOpen]?"branch":"leaf")+'" '+r+">"+(e[c.config.cols.isOpen]?a.config.branch[1]:a.config.branch[0])+"</i>":e[c.config.cols.icon]?l=d():l+='<i class="layui-icon layui-tree-'+e[n.idField]+' layui-tree-leaf"  '+r+">"+a.config.leaf+"</i>",i)return l;var s=a.layBody.find('tr[data-index="'+e[c.config.indexName]+'"]').find("td[data-field="+n[I]+"]").find(".layui-table-cell");t(s).find("div .layui-tree-"+e[n.idField]).remove(),t(s).find("div").append(l)},j.prototype.pullData=function(e,i){var a=this,r=a.config,o=r.request,l=r.response;if(a.startTime=(new Date).getTime(),r.url){var d={};d[o.pageName]=e,d[o.limitName]=r.limit,a.filterRulesSet(d),a.sortSet(d),t.ajax({type:r.method||"get",url:r.url,data:t.extend(d,r.where),dataType:"json",success:function(t){t[l.dataName]||(t[l.dataName]=[],t[l.statusName]=0,t[l.countName]=0,t[l.msgName]="返回的数据状态异常"),a.resetDataresetRoot=!0,"function"==typeof r.parseData&&(t=r.parseData(t)||t),a.resetDatas(t[l.dataName]),t[l.dataName]=c.getDataList(r.id),t[l.statusName]!=l.statusCode?(a.renderForm(),a.layMain.html('<div class="'+h+'">'+(t[l.msgName]||"返回的数据状态异常")+"</div>")):(a.renderData(t,e,t[l.countName]),r.time=(new Date).getTime()-a.startTime+" ms"),i&&n.close(i),a.events(),"function"==typeof r.done&&r.done(t,e,t[l.countName])},error:function(e,t){a.layMain.html('<div class="'+h+'">数据接口请求异常</div>'),a.renderForm(),i&&n.close(i)}})}else if(r.data&&r.data.constructor===Array){var s={},f=e*r.limit-r.limit;s[l.dataName]=r.data.concat().splice(f,r.limit),s[l.countName]=r.data.length,a.resetDatas(s[l.dataName]),s[l.dataName]=c.getDataList(r.id),a.renderData(s,e,r.data.length),a.events(),"function"==typeof r.done&&r.done(s,e,s[l.countName])}},j.prototype.filterRulesSet=function(e){var t=this;e.filterRules=JSON.stringify(t.filterRules())},j.prototype.filterRules=function(){var e=this,i=[],a=e.layFilter.find("[name^='filter_']");return layui.each(a,function(e,a){if(t(a).val()){var n={field:a.name,op:"like",value:t(a).val(),datatype:"string"};i.push(n)}}),i},j.prototype.eachCols=function(e){var i=t.extend(!0,[],this.config.cols),a=[],n=0;layui.each(i,function(e,t){layui.each(t,function(t,r){if(r.colspan>1){var o=0;n++,r.CHILD_COLS=[],layui.each(i[e+1],function(e,t){t.PARENT_COL||o==r.colspan||(t.PARENT_COL=n,r.CHILD_COLS.push(t),o+=t.colspan>1?t.colspan:1)})}r.PARENT_COL||a.push(r)})});var r=function(t){layui.each(t||a,function(t,i){return i.CHILD_COLS?r(i.CHILD_COLS):void e(t,i)})};r()},j.prototype.renderTreeConvertShowName=function(e){var i=this,a=i.config,n=a.elem,r=(n.next("."+p),i.treeConvertShowName(e)),o=i.layBody.find('tr[data-index="'+e[c.config.indexName]+'"]').find("td[data-field="+a[I]+"]").find(".layui-table-cell");t(o).find("div").remove(),t(o).prepend(r)},j.prototype.renderTdCss=function(){var e=this,t=e.config,i=t.elem,a=i.next("."+p),n=e.index+"_"+s+"_td_style";a.find("#"+n).remove();var r='<style id="'+n+'">'+function(){var t="";return layui.each(e.config.cols,function(i,a){layui.each(a,function(i,a){t+=".laytable-cell-"+e.index+"-"+(a.field||i)+"{width:"+(a.width?a.width+"px":"0px")+"}"})}),t}()+"</style>";a.append(r)},j.prototype.renderCss=function(){var e=this,t=e.config,i=t.elem,a=i.next("."+p),n=e.index+"_"+s+"_style";a.find("#"+n).remove();var r='<style id="'+n+'">'+function(){var e=".layui-tree-head{cursor: pointer;}";return e+=".layui-table-view {margin:0;}"}()+"</style>";a.append(r)},j.prototype.renderTrUpids=function(e){var t=this,i=t.config,a=i[R],n=(' upids="'+e.upIds+'" ',' u_id="'+e[a]+'" '),r=i.isTree?n:"";return r},j.prototype.renderTd=function(e,a,n,r){var o=this,l=o.config,d=null==e[a.field]?"":String(e[a.field]),s=a.field||r,f=d,u=(o.getColElem(o.layHeader,s),"");l.isTree&&l.treeShowName==a.field&&(u=o.treeConvertShowName(e));var h=['<td data-field="'+s+'" '+function(){var e=[];return a.edit&&e.push('data-edit="'+a.edit+'"'),a.align&&e.push('align="'+a.align+'"'),a.templet&&e.push('data-content="'+f+'"'),a.toolbar&&e.push('data-off="true"'),a.event&&e.push('lay-event="'+a.event+'"'),a.style&&e.push('style="'+a.style+'"'),a.minWidth&&e.push('data-minwidth="'+a.minWidth+'"'),e.join(" ")}()+">",'<div class="layui-table-cell laytable-cell-'+function(){var e=l.index+"-"+s;return"normal"===a.type?e:e+" laytable-cell-"+a.type}()+'">'+u+'<p style="width: auto;height: 100%;">'+function(){var r=t.extend(!0,{LAY_INDEX:n},e);if("checkbox"===a.type)return r[c.config.cols.cheDisabled]?"":'<input type="checkbox" name="'+L+'" value="'+r[c.config.indexName]+'" lay-skin="primary" '+function(){var t=c.config.cols.isCheckName;return a[t]?(e[t]=a[t],a[t]?"checked":""):r[t]?"checked":""}()+">";if("numbers"===a.type)return n;if("drop"===a.type){var o=dl.ui.table.drop.findFieldObj(l.cols[0],s);if(o&&o.drop){dl.cache.code.get(o.drop);return dl.ui.table.drop.findDropLable(o.drop,f)}}else if("radio"===a.type)return r[c.config.cols.radDisabled]?"":'<input type="radio" name="'+F+'" '+function(){var t=c.config.cols.isRadio;return a[t]?(e[t]=a[t],a[t]?"checked":""):r[t]?"checked":""}()+' value="'+r[c.config.indexName]+'" title=" ">';return a.toolbar?i(t(a.toolbar).html()||"").render(r):a.templet?function(){return"function"==typeof a.templet?a.templet(r):i(t(a.templet).html()||String(f)).render(r)}():f}(),"</p></div></td>"].join("");return h},j.prototype.renderTr=function(e,t){var i=this,a=(i.config,[]);return i.eachCols(function(n,r){var o=r.field||n;e[o];if(!(r.colspan>1)){var l=i.renderTd(e,r,t,n);a.push(l)}}),a},j.prototype.renderData=function(e,t,i,a){var r=this,o=r.config,l=e[o.response.dataName]||[],d=[],s=[],f=[],p=function(){return!a&&r.sortKey?r.sort(r.sortKey.field,r.sortKey.sort,!0):(layui.each(l,function(e,i){var n=(r.treeFindUpData(i),"");!i[c.config.cols.isShow]&&o.isTree&&(n="display: none;");var l=[],u=[],h=[],p=e+o.limit*(t-1)+1;0!==i.length&&(a||(i[c.config.indexName]=e),l=r.renderTr(i,p),d.push('<tr style="'+n+'" data-index="'+e+'" '+r.renderTrUpids(i)+">"+l.join("")+"</tr>"),s.push('<tr data-index="'+e+'">'+u.join("")+"</tr>"),f.push('<tr data-index="'+e+'">'+h.join("")+"</tr>"))}),r.layBody.scrollTop(0),r.layMain.find("."+h).remove(),r.layMain.find("tbody").html(d.join("")),r.layFixLeft.find("tbody").html(s.join("")),r.layFixRight.find("tbody").html(f.join("")),r.renderForm(),r.haveInit?r.scrollPatch():setTimeout(function(){r.scrollPatch()},50),r.haveInit=!0,void n.close(r.tipsIndex))};return r.key=o.id||o.index,c.setDataList(r.key,l),r.layPage[0===l.length&&1==t?"addClass":"removeClass"](u),a?p():0===l.length?(r.renderForm(),r.layFixed.remove(),r.layMain.find("tbody").html(""),r.layMain.find("."+h).remove(),r.layMain.append('<div class="'+h+'">'+(e[o.response.msgName]?e[o.response.msgName]:o.text.none)+"</div>")):(p(),r.renderPage(i),void c.pushClassIds(o.id,!0))},j.prototype.renderPage=function(e){var i=this,n=i.config;n.isPage&&(n.page=t.extend({elem:"layui-table-page"+n.index,count:e,limit:n.limit,limits:n.limits||[10,15,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,t){t||(i.page=e.curr,n.limit=e.limit,i.pullData(e.curr,i.loading()))}},n.page),n.page.count=e,a.render(n.page))},j.prototype.renderFilter=function(){var e=this,t=e.config,i=e.index,a=[];return a.push('<form method="post"  id="'+t.id+'_filter_form">'),a.push('<table cellspacing="0" cellpadding="0" border="0" class="layui-table"><thead><tr>'),layui.each(t.cols,function(e,t){layui.each(t,function(e,t){var n=t.field||e,r=t.minWidth?"data-minwidth='"+t.minWidth+"'":"",o=t.colspan?'colspan="'+t.colspan+'"':"",l=t.rowspan?'rowspan="'+t.rowspan+'"':"",c=t.unresize?'data-unresize="true"':"";a.push('<th data-field="'+n+'"'+r+o+l+c+">"),a.push('<div class="layui-table-cell laytable-cell-'+function(){var e="";return t.colspan>1?e="group":(e=i+"-"+n,"normal"!==t.type&&(e+=" laytable-cell-"+t.type)),e}()+'">'),t.isFilter&&t.field?a.push('<input class="layui-input '+N+'" id="filter_'+t.field+'" name="filter_'+t.field+'">'):a.push(""),a.push("</div></th>")})}),a.push("</tr></thead></table>"),a.push("</form>"),a.join("")},j.prototype.getColElem=function(e,t){var i=this,a=i.config;return e.eq(0).find(".laytable-cell-"+(a.index+"-"+t)+":eq(0)")},j.prototype.renderForm=function(e){r.render(e,"LAY-table-"+this.index)},j.prototype.sortSet=function(e){var t=this,i=[],a=t.config.cols[0];a.forEach(function(e){if(e.sortType){var t={field:e.field,sort:e.sortType};i.push(t)}}),e.sort=JSON.stringify(i)},j.prototype.sort=function(e,i,a,n){var r,l=this,d=l.config;d.elem.attr("lay-filter"),c.getDataList(l.key);"string"==typeof e&&l.layHeader.find("th").each(function(i,a){var n=t(this),o=n.data("field");if(o===e)return e=n,r=o,!1});try{var r=r||e.data("field");if(l.sortKey&&!a&&r===l.sortKey.field&&i===l.sortKey.sort)return;var s=l.layHeader.find("th .laytable-cell-"+d.index+"-"+r).find(C);s.attr("lay-sort",i||null),l.layFixed.find("th")}catch(f){return o.error("Table modules: Did not match to field")}var u=l.getCols(r);u&&(u.sortType=i)},j.prototype.loading=function(){var e=this,t=e.config;if(t.loading&&t.url)return n.msg("数据请求中",{icon:16,offset:[e.elem.offset().top+e.elem.height()/2-35-z.scrollTop()+"px",e.elem.offset().left+e.elem.width()/2-90-z.scrollLeft()+"px"],time:-1,anim:-1,fixed:!1})},j.prototype.setCheckData=function(e,t){var i=this,a=(i.config,c.getDataList(i.key));a[e]&&a[e].constructor!==Array&&(a[e][c.config.cols.isCheckName]=t)},j.prototype.syncCheckAll=function(){var e=this,t=e.config,i=c.getDataList(e.config.id);if(i){var a=!0,n=0;if(i.forEach(function(t){if(!t[c.config.cols.cheDisabled])if(t[c.config.cols.isCheckName]){var i=e.layBody.find("tr[data-index="+t[c.config.indexName]+"]").find('input[name="'+L+'"]');i.prop("checked",!0),n++}else{a=!1;var i=e.layBody.find("tr[data-index="+t[c.config.indexName]+"]").find('input[name="'+L+'"]');i.prop("checked",!1)}}),a){var r=e.layHeader.find('input[name="'+L+'"]');r.prop("checked",!0)}if(n<i.length-t.cheDisabledNum){var r=e.layHeader.find('input[name="'+L+'"]');r.prop("checked",!1)}e.renderForm("checkbox")}},j.prototype.getCssRule=function(e,t){var i=this,a=i.elem.find("style")[0],n=a.sheet||a.styleSheet||{},r=n.cssRules||n.rules;layui.each(r,function(a,n){if(n.selectorText===".laytable-cell-"+i.index+"-"+e)return t(n),!0})},j.prototype.test=function(){},j.prototype.resize=function(){var e=this;e.columnWidthInit(),e.tableHeight(),e.resizeHeight(),e.resizeWidth()},j.prototype.setArea=function(){var e=this;e.columnWidthInit(),e.tableHeight()},j.prototype.columnWidthInit=function(){var e=this,t=e.config,i=0,a=0,n=0,r=0,o=t.width||function(){var e=function(i){var a,n;i=i||t.elem.parent(),a=i.width();try{n="none"===i.css("display")}catch(r){}return!i[0]||a&&!n?a:e(i.parent())};return e()}()-17;e.eachCols(function(){i++}),o-=function(){return"line"===t.skin||"nob"===t.skin?2:i+1}(),layui.each(t.cols,function(t,i){layui.each(i,function(t,n){var l;return n?(e.initOpts(n),l=n.width||0,void(n.colspan>1||(/\d+%$/.test(l)?n.width=l=Math.floor(parseFloat(l)/100*o):!n._is_width_dev&&l||(n._is_width_dev=!0,n.width=l=0,a++),r+=l))):void i.splice(t,1)})}),e.autoColNums=a,o>r&&a&&(n=(o-r)/a),layui.each(t.cols,function(e,i){layui.each(i,function(e,i){var a=i.minWidth||t.cellMinWidth;i.colspan>1||0===i.width&&(i.width=Math.floor(n>=a?n:a))})})},j.prototype.resizeWidth=function(){var e=this;e.renderTdCss()},j.prototype.tableHeight=function(){var e=this,i=e.config,a=e.configFirst;if(!c.kit.isNumber(a.height)){var n=0;if(i.heightRemove&&c.kit.isArray(i.heightRemove)){var r=i.heightRemove;r.forEach(function(e){var i=c.kit.isNumber(e)?e:t(e).outerHeight(!0);c.kit.isNumber(i)&&(n+=i)})}var o=z.height()-n-1;e.fullHeightGap=0,i.height&&/^full-\d+$/.test(i.height)&&(e.fullHeightGap=i.height.split("-")[1]),i.height=o-e.fullHeightGap}},j.prototype.resizeHeight=function(){var e,t=this,i=t.config,a=i.height;a<135&&(a=135),t.elem.css("height",a);var n=i.isFilter?76:38;e=parseFloat(a)-n-1,i.toolbar&&(e-=t.layTool.outerHeight()),i.isPage&&(e=e-t.layPage.outerHeight()-1),t.layMain.css("height",e)},j.prototype.getScrollWidth=function(e){var t=0;return e?t=e.offsetWidth-e.clientWidth:(e=document.createElement("div"),e.style.width="100px",e.style.height="100px",e.style.overflowY="scroll",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,
document.body.removeChild(e)),t},j.prototype.scrollPatch=function(){var e=this,i=e.layMain.children("table"),a=e.layMain.width()-e.layMain.prop("clientWidth"),n=e.layMain.height()-e.layMain.prop("clientHeight"),r=e.getScrollWidth(e.layMain[0]),o=i.outerWidth()-e.layMain.width();if(e.autoColNums&&o<5&&!e.scrollPatchWStatus){var l=e.layHeader.eq(0).find("thead th:last-child"),c=l.data("field");e.getCssRule(c,function(t){var i=t.style.width||l.outerWidth();t.style.width=parseFloat(i)-r-o+"px",e.layMain.height()-e.layMain.prop("clientHeight")>0&&(t.style.width=parseFloat(t.style.width)-1+"px"),e.scrollPatchWStatus=!0})}if(a&&n){if(e.elem.find(".layui-table-patch").length<=0){var d=t('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>');d.find("div").css({width:a}),e.layHeader.eq(0).find("thead tr").append(d)}}else e.layFilter.eq(0).find(".layui-table-patch").remove(),e.layHeader.eq(0).find(".layui-table-patch").remove();var s=e.layMain.height(),f=s-n;e.layFixed.find(g).css("height",i.height()>f?f:"auto"),e.layFixRight[o>0?"removeClass":"addClass"](u),e.layFixRight.css("right",a-1)},j.prototype.events=function(){var e,i=this,a=i.config,r=t("body"),o={},l=i.layHeader.find("th"),d=i.layBody.find("tr");d.unbind("click").on("click",function(e){var n=t(this).attr("data-index"),r=c.getDataList(i.config.id),o=(d[n],r[n]);"function"==typeof a.onClickRow&&a.onClickRow(n,o,t(this))}),d.unbind("dblclick").on("dblclick",function(e){var n=t(this).attr("data-index"),r=c.getDataList(i.config.id),o=r[n];"function"==typeof a.onDblClickRow&&a.onDblClickRow(n,o)}),l.unbind("mousemove").on("mousemove",function(e){var i=t(this),a=i.offset().left,n=e.clientX-a;i.attr("colspan")>1||i.data("unresize")||o.resizeStart||(o.allowResize=i.width()-n<=10,r.css("cursor",o.allowResize?"col-resize":""))}),l.unbind("mouseleave").on("mouseleave",function(){t(this);o.resizeStart||r.css("cursor","")}),l.unbind("mousedown").on("mousedown",function(e){var n=t(this);if(o.allowResize){var r=n.data("field");e.preventDefault(),o.resizeStart=!0,o.offset=[e.clientX,e.clientY],i.getCssRule(r,function(e){var t=e.style.width||n.outerWidth();o.rule=e,o.ruleWidth=parseFloat(t),o.minWidth=n.data("minwidth")||a.cellMinWidth})}}),E.unbind("mousemove").on("mousemove",function(t){if(o.resizeStart){if(t.preventDefault(),o.rule){var a=o.ruleWidth+t.clientX-o.offset[0];a<o.minWidth&&(a=o.minWidth),o.rule.style.width=a+"px",n.close(i.tipsIndex)}e=1}}),E.unbind("mouseup").on("mouseup",function(t){o.resizeStart&&(o={},r.css("cursor",""),i.scrollPatch()),2===e&&(e=null)}),l.unbind("click").on("click",function(){var a,n=t(this),r=n.find(C),o=r.attr("lay-sort");return r[0]&&1!==e?(a="asc"===o?"desc":"desc"===o?null:"asc",i.sort(n,a,null,!0),void c.query(i.key)):e=2}),l.find(C+" .layui-edge ").unbind("click").on("click",function(e){var a=t(this),n=a.index(),r=a.parents("th").eq(0).data("field");layui.stope(e),0===n?i.sort(r,"asc",null,!0):i.sort(r,"desc",null,!0),c.query(i.key)}),i.eventsinitIsRun||(i.eventsinit(),i.eventsinitIsRun=!0),i.layMain.unbind("scroll").on("scroll",function(){var e=t(this),a=e.scrollLeft(),r=e.scrollTop();i.layHeader.scrollLeft(a),i.layFilter.scrollLeft(a),i.layFixed.find(g).scrollTop(r),n.close(i.tipsIndex)}),z.unbind("resize").on("resize",function(){i.resize()})},j.prototype.eventsinitIsRun=!1,j.prototype.eventsinit=function(){var e=this,a=e.config,r=".layui-table-cell",o=a.elem.attr("lay-filter");e.layFilter.on("keyup","[name^='filter_']",function(){e.page=1,e.pullData(e.page,e.loading())}),e.layBody.on("mouseenter","tr",function(){var i=t(this),a=i.index();e.layBody.find("tr:eq("+a+")").addClass(w)}),e.layBody.on("mouseleave","tr",function(){var i=t(this),a=i.index();e.layBody.find("tr:eq("+a+")").removeClass(w)}),e.layBody.on("click","td div.layui-table-cell p",function(){var i=t(this).parent().parent(),a=i.data("field"),o=i.data("edit"),d=i.parents("tr").eq(0).data("index"),s=c.getDataList(e.key)[d],f=i.children(r),u=e.config;if(n.close(e.tipsIndex),!i.data("off"))if(o)if("select"===o){var h=(i.data("drop"),dl.ui.table.drop.findFieldObj(u.cols[0],a)),p=dl.cache.code.get(h.drop),y="",g=p.syscodevaluecache;for(var v in g){var m="";g[v].scv_value==s[a]&&(m="selected='selected'"),y+="<option "+m+'  value="'+g[v].scv_value+'">'+g[v].scv_show_name+"</option>"}var b=t('<select class="'+N+'" lay-ignore>'+y+"</select>");i.find("."+N)[0]||i.append(b)}else{var x=t('<input class="layui-input '+N+'">');x[0].value=t.trim(t(this).text()),i.find("."+N)[0]||i.append(x),x.focus()}else{var D=e.getCols(a);if(!c.config.initWidth[D.type]){if(f.find(".layui-form-switch,.layui-form-checkbox")[0])return;Math.round(f.prop("scrollWidth"))>Math.round(f.outerWidth())&&(e.tipsIndex=n.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(f.height()+16)+"px;"+function(){return"sm"===u.size?"padding: 4px 15px; font-size: 12px;":"lg"===u.size?"padding: 14px 15px;":""}()+'">',f.html(),"</div>",'<i class="layui-icon layui-table-tips-c">&#x1006;</i>'].join(""),f[0],{tips:[3,""],time:-1,anim:-1,maxWidth:l.ios||l.android?300:600,isOutAnim:!1,skin:"layui-table-tips",success:function(e,t){e.find(".layui-table-tips-c").on("click",function(){n.close(t)})}}))}}}),e.layBody.on("change","."+N,function(){var i=t(this),a=this.value,n=i.parent().data("field"),r=i.parents("tr").eq(0).data("index"),l=c.getDataList(e.key)[r];l[n]=a,layui.event.call(this,s,"edit("+o+")",{value:a,data:l,field:n})}),e.layBody.on("blur","."+N,function(){var a,n=t(this),o=n.parent().data("field"),l=n.parents("tr").eq(0).data("index"),d=n.parent().data("edit"),s=c.getDataList(e.key)[l],f=e.config;e.eachCols(function(e,t){t.field==o&&t.templet&&(a=t.templet)});var u="";if("select"===d){var h=dl.ui.table.drop.findFieldObj(f.cols[0],o);if(h&&h.drop){dl.cache.code.get(h.drop);u=dl.ui.table.drop.findDropLable(h.drop,this.value)}n.parent().find(r+" p").html(a?i(t(a).html()||u).render(s):u)}else n.parent().find(r+" p").html(a?i(t(a).html()||this.value).render(s):this.value);n.parent().data("content",this.value),n.remove()}),e.elem.on("click","i.layui-tree-head",function(){var i=t(this),a=i.parents("tr").eq(0).data("index"),n=(e.config,c.getDataList(e.key)),r=n[a];e.treeNodeOpen(r,!r[c.config.cols.isOpen]),e.resize()}),e.elem.on("click",'input[name="'+L+'"]+',function(){var i=t(this).prev(),n=(e.layBody.find('input[name="'+L+'"]'),i.parents("tr").eq(0).data("index")),r=i[0].checked,l=c.getDataList(e.config.id)[n],d="layTableAllChoose"===i.attr("lay-filter");if(d){var f=c.getDataList(e.key);f.forEach(function(t){t[c.config.cols.cheDisabled]||e.setCheckData(t[c.config.indexName],r)})}else if(e.setCheckData(n,r),a.isTree){var u=e.treeFindSonData(l);u.forEach(function(t){t[c.config.cols.cheDisabled]||e.setCheckData(t[c.config.indexName],r)});var h=function(t){if(null!=t&&t&&t.children.length>0){var i=!0;t.children.forEach(function(e){e[c.config.cols.isCheckName]||(i=!1)});var a=e.treeFindUpData(t);a&&h(a)}},p=e.treeFindUpData(l);h(p)}e.syncCheckAll(),layui.event.call(this,s,"checkbox("+o+")",{checked:r,data:c.getDataList(e.key)?l||{}:{},type:d?"all":"one"}),"function"==typeof a.onCheck&&a.onCheck(l,r,d)}),e.elem.on("click",'input[name="'+F+'"]+',function(){var i=t(this).prev(),n=i.parents("tr").eq(0).data("index"),r=c.getDataList(e.config.id)[n];"function"==typeof a.onRadio&&a.onRadio(r)}),e.layBody.on("click","*[lay-event]",function(){var n=t(this),l=n.parents("tr").eq(0).data("index"),d=e.layBody.find('tr[data-index="'+l+'"]'),f=d.find('td[data-field="name"]'),u="layui-table-click",h=(c.getDataList(e.key),c.getDataList(e.key)[l]);layui.event.call(this,s,"tool("+o+")",{data:h,event:n.attr("lay-event"),tr:d,del:function(){c.delRow(a.id,h)},edit:function(){var e=t('<input class="layui-input '+N+'">');e[0].value=t.trim(f.find("p").text()),f.find("."+N)[0]||f.append(e),e.focus()},update:function(a){a=a||{},layui.each(a,function(a,n){if(a in h){var o,l=d.children('td[data-field="'+a+'"]');h[a]=n,e.eachCols(function(e,t){t.field==a&&t.templet&&(o=t.templet)}),l.children(r).html(o?i(t(o).html()||n).render(h):n),l.data("content",n)}})}}),d.addClass(u).siblings("tr").removeClass(u)})},d.config={},c.init(),e(s,c)});